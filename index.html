<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üêπ –¢–∞–ø–∞–ª–∫–∞ –•–æ–º—è–∫–∞</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
            text-align: center;
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }
        
        h1 {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            gap: 10px;
        }
        
        .stat-box {
            background: rgba(255, 255, 255, 0.15);
            padding: 15px;
            border-radius: 15px;
            flex: 1;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #FFD700;
        }
        
        /* –•–æ–º—è–∫ */
        .hamster-container {
            margin: 30px 0;
            position: relative;
        }
        
        .hamster {
            width: 200px;
            height: 200px;
            margin: 0 auto;
            cursor: pointer;
            position: relative;
            transition: transform 0.1s;
        }
        
        .hamster:active {
            transform: scale(0.95);
        }
        
        .hamster-body {
            width: 160px;
            height: 120px;
            background: #8B4513;
            border-radius: 50%;
            position: absolute;
            top: 50px;
            left: 20px;
        }
        
        .hamster-face {
            width: 100px;
            height: 80px;
            background: #A0522D;
            border-radius: 50%;
            position: absolute;
            top: 20px;
            left: 30px;
        }
        
        .eye {
            width: 15px;
            height: 15px;
            background: white;
            border-radius: 50%;
            position: absolute;
            top: 30px;
        }
        
        .eye-left { left: 25px; }
        .eye-right { left: 60px; }
        
        .pupil {
            width: 7px;
            height: 7px;
            background: black;
            border-radius: 50%;
            position: absolute;
            top: 4px;
            left: 4px;
        }
        
        .ear {
            width: 30px;
            height: 30px;
            background: #A0522D;
            border-radius: 50%;
            position: absolute;
            top: 15px;
        }
        
        .ear-left { left: 15px; }
        .ear-right { left: 115px; }
        
        .cheek {
            width: 25px;
            height: 15px;
            background: #FFB6C1;
            border-radius: 50%;
            position: absolute;
            top: 45px;
        }
        
        .cheek-left { left: 15px; }
        .cheek-right { left: 60px; }
        
        /* –ö–Ω–æ–ø–∫–∏ */
        .buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }
        
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .tap-btn {
            background: #4CAF50;
            color: white;
            flex: 2;
        }
        
        .upgrade-btn {
            background: #2196F3;
            color: white;
            flex: 1;
        }
        
        .reset-btn {
            background: #ff4444;
            color: white;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        button:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
        }
        
        /* –£–ª—É—á—à–µ–Ω–∏—è */
        .upgrades {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
        }
        
        .upgrade-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin: 10px 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        
        .upgrade-info {
            text-align: left;
        }
        
        .upgrade-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .upgrade-desc {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .upgrade-price {
            color: #FFD700;
            font-weight: bold;
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏—è –º–æ–Ω–µ—Ç–∫–∏ */
        .coin-popup {
            position: absolute;
            color: #FFD700;
            font-weight: bold;
            font-size: 1.5rem;
            animation: floatUp 1s ease-out forwards;
            pointer-events: none;
            z-index: 100;
        }
        
        @keyframes floatUp {
            0% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) scale(0.5);
                opacity: 0;
            }
        }
        
        /* –ü–ª–∞—à–∫–∞ Telegram */
        .telegram-info {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üêπ –¢–∞–ø–∞–ª–∫–∞ –•–æ–º—è–∫–∞</h1>
            <p>–¢–∞–ø–∞–π—Ç–µ —Ö–æ–º—è–∫–∞, —á—Ç–æ–±—ã –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –º–æ–Ω–µ—Ç—ã!</p>
        </div>
        
        <div class="stats">
            <div class="stat-box">
                <div>üí∞ –ú–æ–Ω–µ—Ç—ã</div>
                <div class="stat-value" id="coins">0</div>
            </div>
            <div class="stat-box">
                <div>üëÜ –ó–∞ –∫–ª–∏–∫</div>
                <div class="stat-value" id="perClick">1</div>
            </div>
            <div class="stat-box">
                <div>‚ö° CPS</div>
                <div class="stat-value" id="cps">0</div>
            </div>
        </div>
        
        <div class="hamster-container">
            <div class="hamster" id="hamster">
                <!-- –£—à–∏ -->
                <div class="ear ear-left"></div>
                <div class="ear ear-right"></div>
                
                <!-- –¢–µ–ª–æ -->
                <div class="hamster-body"></div>
                
                <!-- –ú–æ—Ä–¥–æ—á–∫–∞ -->
                <div class="hamster-face">
                    <!-- –ì–ª–∞–∑–∞ -->
                    <div class="eye eye-left">
                        <div class="pupil"></div>
                    </div>
                    <div class="eye eye-right">
                        <div class="pupil"></div>
                    </div>
                    
                    <!-- –©–µ—á–∫–∏ -->
                    <div class="cheek cheek-left"></div>
                    <div class="cheek cheek-right"></div>
                </div>
            </div>
        </div>
        
        <div class="buttons">
            <button class="tap-btn" onclick="tapHamster()">
                üëÜ –¢–∞–ø–∞—Ç—å —Ö–æ–º—è–∫–∞!
            </button>
            <button class="upgrade-btn" onclick="autoClicker()" id="autoClickerBtn">
                ü§ñ –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä
            </button>
        </div>
        
        <div class="upgrades">
            <h3>üõ†Ô∏è –£–ª—É—á—à–µ–Ω–∏—è</h3>
            
            <div class="upgrade-item">
                <div class="upgrade-info">
                    <div class="upgrade-name">–£—Å–∏–ª–µ–Ω–Ω—ã–µ –ø–∞–ª—å—Ü—ã</div>
                    <div class="upgrade-desc">+1 –º–æ–Ω–µ—Ç–∞ –∑–∞ –∫–ª–∏–∫</div>
                </div>
                <button onclick="buyUpgrade('clickPower')" id="clickPowerBtn">
                    üõí <span class="upgrade-price">50</span>
                </button>
            </div>
            
            <div class="upgrade-item">
                <div class="upgrade-info">
                    <div class="upgrade-name">–ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä</div>
                    <div class="upgrade-desc">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–ª–∏–∫–∞–µ—Ç 1 —Ä–∞–∑/—Å–µ–∫</div>
                </div>
                <button onclick="buyUpgrade('autoClicker')" id="autoClickerUpgradeBtn">
                    üõí <span class="upgrade-price">100</span>
                </button>
            </div>
            
            <div class="upgrade-item">
                <div class="upgrade-info">
                    <div class="upgrade-name">–•–æ–º—è–∫-—Ñ–µ—Ä–º–∞</div>
                    <div class="upgrade-desc">+5 –º–æ–Ω–µ—Ç/—Å–µ–∫</div>
                </div>
                <button onclick="buyUpgrade('hamsterFarm')" id="hamsterFarmBtn">
                    üõí <span class="upgrade-price">500</span>
                </button>
            </div>
        </div>
        
        <button class="reset-btn" onclick="resetGame()">
            üîÑ –°–±—Ä–æ—Å–∏—Ç—å –∏–≥—Ä—É
        </button>
        
        <div class="telegram-info">
            <p>üì± <strong>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:</strong> <span id="platform">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
            <p>üë§ <strong>–ò–≥—Ä–æ–∫:</strong> <span id="playerName">–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ</span></p>
        </div>
    </div>

    <script>
        // ===== TELEGRAM INIT =====
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready();
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        const user = tg.initDataUnsafe.user;
        if (user) {
            document.getElementById('playerName').textContent = user.first_name;
        }
        document.getElementById('platform').textContent = tg.platform;
        
        // ===== –ò–ì–†–û–í–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï =====
        let coins = parseInt(localStorage.getItem('hamster_coins')) || 0;
        let clickPower = parseInt(localStorage.getItem('hamster_clickPower')) || 1;
        let cps = parseInt(localStorage.getItem('hamster_cps')) || 0; // coins per second
        let autoClickerActive = localStorage.getItem('hamster_autoClicker') === 'true';
        let upgrades = {
            clickPower: parseInt(localStorage.getItem('upgrade_clickPower')) || 0,
            autoClicker: localStorage.getItem('upgrade_autoClicker') === 'true',
            hamsterFarm: parseInt(localStorage.getItem('upgrade_hamsterFarm')) || 0
        };
        
        // ===== –û–ë–ù–û–í–õ–ï–ù–ò–ï –ò–ù–¢–ï–†–§–ï–ô–°–ê =====
        function updateUI() {
            document.getElementById('coins').textContent = formatNumber(coins);
            document.getElementById('perClick').textContent = clickPower;
            document.getElementById('cps').textContent = cps;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ —É–ª—É—á—à–µ–Ω–∏–π
            updateUpgradeButtons();
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–≥—Ä—É
            saveGame();
        }
        
        function formatNumber(num) {
            if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
            if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
            return num;
        }
        
        // ===== –û–°–ù–û–í–ù–ê–Ø –ú–ï–•–ê–ù–ò–ö–ê =====
        function tapHamster() {
            // –î–æ–±–∞–≤–ª—è–µ–º –º–æ–Ω–µ—Ç—ã
            coins += clickPower;
            
            // –°–æ–∑–¥–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –º–æ–Ω–µ—Ç–∫–∏
            createCoinPopup(clickPower);
            
            // –¢–∞–∫—Ç–∏–ª—å–Ω—ã–π –æ—Ç–∫–ª–∏–∫ –≤ Telegram
            if (tg.HapticFeedback) {
                tg.HapticFeedback.impactOccurred('light');
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
            updateUI();
            
            // –ê–Ω–∏–º–∞—Ü–∏—è —Ö–æ–º—è–∫–∞
            const hamster = document.getElementById('hamster');
            hamster.style.transform = 'scale(0.95)';
            setTimeout(() => {
                hamster.style.transform = 'scale(1)';
            }, 100);
        }
        
        function createCoinPopup(amount) {
            const hamster = document.getElementById('hamster');
            const popup = document.createElement('div');
            popup.className = 'coin-popup';
            popup.textContent = `+${amount}üí∞`;
            popup.style.left = `${Math.random() * 100 + 50}px`;
            popup.style.top = `${Math.random() * 100 + 50}px`;
            
            hamster.appendChild(popup);
            
            setTimeout(() => {
                popup.remove();
            }, 1000);
        }
        
        // ===== –£–õ–£–ß–®–ï–ù–ò–Ø =====
        function buyUpgrade(type) {
            let price = 0;
            
            switch(type) {
                case 'clickPower':
                    price = 50 * Math.pow(1.5, upgrades.clickPower);
                    if (coins >= price) {
                        coins -= price;
                        clickPower += 1;
                        upgrades.clickPower++;
                        tg.showAlert("‚úÖ –£—Å–∏–ª–µ–Ω–Ω—ã–µ –ø–∞–ª—å—Ü—ã –∫—É–ø–ª–µ–Ω—ã!");
                    } else {
                        tg.showAlert("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!");
                        return;
                    }
                    break;
                    
                case 'autoClicker':
                    price = 100;
                    if (coins >= price && !upgrades.autoClicker) {
                        coins -= price;
                        upgrades.autoClicker = true;
                        autoClickerActive = true;
                        startAutoClicker();
                        tg.showAlert("‚úÖ –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä –∫—É–ø–ª–µ–Ω!");
                    } else if (upgrades.autoClicker) {
                        tg.showAlert("‚ùå –£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –∞–≤—Ç–æ–∫–ª–∏–∫–µ—Ä!");
                        return;
                    } else {
                        tg.showAlert("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!");
                        return;
                    }
                    break;
                    
                case 'hamsterFarm':
                    price = 500 * Math.pow(1.8, upgrades.hamsterFarm);
                    if (coins >= price) {
                        coins -= price;
                        cps += 5;
                        upgrades.hamsterFarm++;
                        tg.showAlert("‚úÖ –•–æ–º—è–∫-—Ñ–µ—Ä–º–∞ –∫—É–ø–ª–µ–Ω–∞!");
                    } else {
                        tg.showAlert("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!");
                        return;
                    }
                    break;
            }
            
            updateUI();
        }
        
        function updateUpgradeButtons() {
            // –£—Å–∏–ª–µ–Ω–Ω—ã–µ –ø–∞–ª—å—Ü—ã
            const clickPowerPrice = 50 * Math.pow(1.5, upgrades.clickPower);
            const clickPowerBtn = document.getElementById('clickPowerBtn');
            clickPowerBtn.innerHTML = `üõí <span class="upgrade-price">${Math.round(clickPowerPrice)}</span>`;
            clickPowerBtn.disabled = coins < clickPowerPrice;
            
            // –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä
            const autoClickerBtn = document.getElementById('autoClickerUpgradeBtn');
            if (upgrades.autoClicker) {
                autoClickerBtn.innerHTML = '‚úÖ –ö—É–ø–ª–µ–Ω–æ';
                autoClickerBtn.disabled = true;
            } else {
                autoClickerBtn.innerHTML = `üõí <span class="upgrade-price">100</span>`;
                autoClickerBtn.disabled = coins < 100;
            }
            
            // –•–æ–º—è–∫-—Ñ–µ—Ä–º–∞
            const hamsterFarmPrice = 500 * Math.pow(1.8, upgrades.hamsterFarm);
            const hamsterFarmBtn = document.getElementById('hamsterFarmBtn');
            hamsterFarmBtn.innerHTML = `üõí <span class="upgrade-price">${Math.round(hamsterFarmPrice)}</span>`;
            hamsterFarmBtn.disabled = coins < hamsterFarmPrice;
            
            // –ö–Ω–æ–ø–∫–∞ –∞–≤—Ç–æ–∫–ª–∏–∫–µ—Ä–∞
            const autoClickerToggleBtn = document.getElementById('autoClickerBtn');
            if (upgrades.autoClicker) {
                autoClickerToggleBtn.innerHTML = autoClickerActive ? 'ü§ñ –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä: –í–ö–õ' : 'ü§ñ –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä: –í–´–ö–õ';
            } else {
                autoClickerToggleBtn.innerHTML = 'ü§ñ –ö—É–ø–∏—Ç–µ –∞–≤—Ç–æ–∫–ª–∏–∫–µ—Ä';
                autoClickerToggleBtn.disabled = true;
            }
        }
        
        // ===== –ê–í–¢–û–ö–õ–ò–ö–ï–† =====
        function autoClicker() {
            if (!upgrades.autoClicker) {
                tg.showAlert("‚ùå –°–Ω–∞—á–∞–ª–∞ –∫—É–ø–∏—Ç–µ –∞–≤—Ç–æ–∫–ª–∏–∫–µ—Ä –≤ —É–ª—É—á—à–µ–Ω–∏—è—Ö!");
                return;
            }
            
            autoClickerActive = !autoClickerActive;
            if (autoClickerActive) {
                startAutoClicker();
                tg.showAlert("‚úÖ –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä –≤–∫–ª—é—á–µ–Ω!");
            } else {
                tg.showAlert("‚è∏Ô∏è –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä –≤—ã–∫–ª—é—á–µ–Ω");
            }
            updateUI();
        }
        
        function startAutoClicker() {
            if (autoClickerActive) {
                coins += clickPower;
                updateUI();
                setTimeout(startAutoClicker, 1000); // 1 —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É
            }
        }
        
        // ===== CPS –°–ò–°–¢–ï–ú–ê =====
        function startCPS() {
            if (cps > 0) {
                coins += cps;
                updateUI();
            }
            setTimeout(startCPS, 1000); // –ö–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
        }
        
        // ===== –°–û–•–†–ê–ù–ï–ù–ò–ï =====
        function saveGame() {
            localStorage.setItem('hamster_coins', coins);
            localStorage.setItem('hamster_clickPower', clickPower);
            localStorage.setItem('hamster_cps', cps);
            localStorage.setItem('hamster_autoClicker', autoClickerActive);
            localStorage.setItem('upgrade_clickPower', upgrades.clickPower);
            localStorage.setItem('upgrade_autoClicker', upgrades.autoClicker);
            localStorage.setItem('upgrade_hamsterFarm', upgrades.hamsterFarm);
        }
        
        function resetGame() {
            if (confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã? –í–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å –±—É–¥–µ—Ç —Å–±—Ä–æ—à–µ–Ω!")) {
                localStorage.clear();
                coins = 0;
                clickPower = 1;
                cps = 0;
                autoClickerActive = false;
                upgrades = {
                    clickPower: 0,
                    autoClicker: false,
                    hamsterFarm: 0
                };
                tg.showAlert("üîÑ –ò–≥—Ä–∞ —Å–±—Ä–æ—à–µ–Ω–∞!");
                updateUI();
            }
        }
        
        // ===== –ó–ê–ì–†–£–ó–ö–ê –ò–ì–†–´ =====
        function loadGame() {
            updateUI();
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º —Å–∏—Å—Ç–µ–º—ã
            if (autoClickerActive) {
                startAutoClicker();
            }
            startCPS();
            
            console.log("üêπ –ò–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!");
            console.log("–ú–æ–Ω–µ—Ç—ã:", coins);
            console.log("–£–ª—É—á—à–µ–Ω–∏—è:", upgrades);
        }
        
        // ===== –ó–ê–ü–£–°–ö =====
        window.onload = function() {
            loadGame();
            tg.ready();
        };
    </script>
</body>
</html>
